"0",""
"0","#I think the coordinate reference systems (CRS) on these are different, which is why the won't join"
"0","#check crs"
"0","st_crs(bg_boundary)"
"1","Coordinate Reference System:"
"1","
"
"1","  User input:"
"1"," "
"1","4269"
"1"," "
"1","
"
"1","  wkt:
"
"1",""
"1","GEOGCS[""NAD83"",
    DATUM[""North_American_Datum_1983"",
        SPHEROID[""GRS 1980"",6378137,298.257222101,
            AUTHORITY[""EPSG"",""7019""]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY[""EPSG"",""6269""]],
    PRIMEM[""Greenwich"",0,
        AUTHORITY[""EPSG"",""8901""]],
    UNIT[""degree"",0.0174532925199433,
        AUTHORITY[""EPSG"",""9122""]],
    AUTHORITY[""EPSG"",""4269""]]"
"1",""
"1","
"
"0","st_crs(comm_boundary)"
"1","Coordinate Reference System:"
"1","
"
"1","  User input:"
"1"," "
"1","4326"
"1"," "
"1","
"
"1","  wkt:
"
"1",""
"1","GEOGCS[""WGS84(DD)"",
    DATUM[""WGS84"",
        SPHEROID[""WGS84"",6378137.0,298.257223563]],
    PRIMEM[""Greenwich"",0.0],
    UNIT[""degree"",0.017453292519943295],
    AXIS[""Geodetic longitude"",EAST],
    AXIS[""Geodetic latitude"",NORTH]]"
"1",""
"1","
"
"0","#reproject crs"
"0","#https://cengel.github.io/R-spatial/spatialops.html#reprojecting"
"0","comm_boundary2 <- st_transform(comm_boundary, st_crs(bg_boundary))"
"0",""
"0","# find centroids of the different municipalities"
"0","centroids  <- st_centroid(bg_boundary)"
"0",""
"0","# find out to which region they belong"
"0","inters <- sf::st_intersection(comm_boundary2, centroids) %>% "
"0","  sf::st_set_geometry(NULL)"
"2","although coordinates are longitude/latitude, st_intersection assumes that they are planar
"
"0","# re-join with the blockgrps "
"0","cook_sf <- bg_boundary %>% right_join(inters) %>% "
"0","  sf::st_sf(sf_column_name = ""geometry"")"
"2","Joining, by = c(""STATEFP"", ""COUNTYFP"", ""TRACTCE"", ""BLKGRPCE"", ""GEOID"", ""NAMELSAD"", ""MTFCC"", ""FUNCSTAT"", ""ALAND"", ""AWATER"", ""INTPTLAT"", ""INTPTLON"")
"
"0","head(cook_sf)  "
"1","Simple feature collection with 6 features and 21 fields"
"1","
"
"1","geometry type:  POLYGON
"
"1","dimension:      XY
"
"1","bbox:           "
"1","xmin: -87.77593 ymin: 41.75928 xmax: -87.67096 ymax: 41.99412"
"1","
"
"1","CRS:            4269
"
"1"," "
"1"," STATEFP"
"1"," COUNTYFP"
"1"," TRACTCE"
"1"," BLKGRPCE"
"1","        GEOID"
"1","      NAMELSAD"
"1"," MTFCC"
"1"," FUNCSTAT"
"1","   ALAND"
"1"," AWATER"
"1","    INTPTLAT"
"1","
1"
"1","      17"
"1","      031"
"1","  672000"
"1","        3"
"1"," 170316720003"
"1"," Block Group 3"
"1"," G5030"
"1","        S"
"1","  184727"
"1","      0"
"1"," +41.7620710"
"1","
2"
"1","      17"
"1","      031"
"1","  560800"
"1","        3"
"1"," 170315608003"
"1"," Block Group 3"
"1"," G5030"
"1","        S"
"1","  232891"
"1","      0"
"1"," +41.7963543"
"1","
3"
"1","      17"
"1","      031"
"1","  160601"
"1","        1"
"1"," 170311606011"
"1"," Block Group 1"
"1"," G5030"
"1","        S"
"1","  122686"
"1","      0"
"1"," +41.9593811"
"1","
4"
"1","      17"
"1","      031"
"1","  150300"
"1","        7"
"1"," 170311503007"
"1"," Block Group 7"
"1"," G5030"
"1","        S"
"1","  201218"
"1","      0"
"1"," +41.9655362"
"1","
5"
"1","      17"
"1","      031"
"1","  230600"
"1","        2"
"1"," 170312306002"
"1"," Block Group 2"
"1"," G5030"
"1","        S"
"1","  122789"
"1","      0"
"1"," +41.9039850"
"1","
6"
"1","      17"
"1","      031"
"1","  130200"
"1","        1"
"1"," 170311302001"
"1"," Block Group 1"
"1"," G5030"
"1","        S"
"1"," 2075997"
"1","   3028"
"1"," +41.9818378"
"1","
"
"1"," "
"1","     INTPTLON"
"1"," area"
"1"," area_num_1"
"1"," area_numbe"
"1"," comarea"
"1"," comarea_id"
"1","      community"
"1"," perimeter"
"1"," shape_area"
"1"," shape_len"
"1","
1"
"1"," -087.6728544"
"1","    0"
"1","         67"
"1","         67"
"1","       0"
"1","          0"
"1"," WEST ENGLEWOOD"
"1","         0"
"1","   87947692"
"1","  40195.20"
"1","
2"
"1"," -087.7739304"
"1","    0"
"1","         56"
"1","         56"
"1","       0"
"1","          0"
"1"," GARFIELD RIDGE"
"1","         0"
"1","  117890778"
"1","  60080.45"
"1","
3"
"1"," -087.7063565"
"1","    0"
"1","         16"
"1","         16"
"1","       0"
"1","          0"
"1","    IRVING PARK"
"1","         0"
"1","   89611382"
"1","  49083.22"
"1","
4"
"1"," -087.7649738"
"1","    0"
"1","         15"
"1","         15"
"1","       0"
"1","          0"
"1","   PORTAGE PARK"
"1","         0"
"1","  110196097"
"1","  46520.64"
"1","
5"
"1"," -087.7288015"
"1","    0"
"1","         23"
"1","         23"
"1","       0"
"1","          0"
"1","  HUMBOLDT PARK"
"1","         0"
"1","  100480877"
"1","  48583.06"
"1","
6"
"1"," -087.7375733"
"1","    0"
"1","         13"
"1","         13"
"1","       0"
"1","          0"
"1","     NORTH PARK"
"1","         0"
"1","   70288706"
"1","  41581.95"
"1","
"
"1"," "
"1","                       geometry"
"1","
1"
"1"," POLYGON ((-87.67475 41.7648..."
"1","
2"
"1"," POLYGON ((-87.77593 41.7997..."
"1","
3"
"1"," POLYGON ((-87.70825 41.9611..."
"1","
4"
"1"," POLYGON ((-87.76748 41.9677..."
"1","
5"
"1"," POLYGON ((-87.7313 41.9053,..."
"1","
6"
"1"," POLYGON ((-87.74826 41.9835..."
"1","
"
"0","plot(cook_sf[""community""])"
